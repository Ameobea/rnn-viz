<script lang="ts">
  import { RNNGraph } from '../rnn/graph';
  import NodeVizComp from './NodeVizComp.svelte';

  const serializedRNNGraph = JSON.parse(
    '{"inputLayer":{"neurons":[{"name":"input_0","activation":"linear","weights":[],"bias":0},{"name":"input_1","activation":"linear","weights":[],"bias":0}]},"cells":[{"outputNeurons":[null,null,null,{"weights":[{"weight":-0.30000001192092896,"index":0},{"weight":0.5,"index":5}],"bias":-0.8500000238418579,"name":"layer_0_output_3","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":0.4000000059604645,"index":0},{"weight":-0.6499999761581421,"index":3},{"weight":-0.6499999761581421,"index":4}],"bias":-0.4000000059604645,"name":"layer_0_output_4","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":0.25,"index":1}],"bias":0.699999988079071,"name":"layer_0_output_5","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":-0.6499999761581421,"index":0},{"weight":0.44999998807907104,"index":1},{"weight":0.949999988079071,"index":5}],"bias":0.800000011920929,"name":"layer_0_output_6","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":1,"index":0},{"weight":-0.44999998807907104,"index":1},{"weight":1.149999976158142,"index":2},{"weight":-0.699999988079071,"index":3},{"weight":0.6000000238418579,"index":4},{"weight":-0.6000000238418579,"index":5}],"bias":0,"name":"layer_0_output_7","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}}],"recurrentNeurons":[{"weights":[],"bias":0.800000011920929,"name":"layer_0_recurrent_0","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":0.8999999761581421,"index":1}],"bias":0,"name":"layer_0_recurrent_1","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":0.699999988079071,"index":2}],"bias":0,"name":"layer_0_recurrent_2","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}},{"weights":[{"weight":-0.5,"index":4},{"weight":-0.6000000238418579,"index":5}],"bias":-0.550000011920929,"name":"layer_0_recurrent_3","activation":{"type":"interpolatedAmeo","factor":0.6,"leakyness":1}}],"stateNeurons":[{"bias":1.649999976158142,"name":"layer_0_state_0","activation":"linear","weights":[{"weight":1,"index":0}]},{"bias":-0.6499999761581421,"name":"layer_0_state_1","activation":"linear","weights":[{"weight":1,"index":1}]},{"bias":1.899999976158142,"name":"layer_0_state_2","activation":"linear","weights":[{"weight":1,"index":2}]},{"bias":2.4000000953674316,"name":"layer_0_state_3","activation":"linear","weights":[{"weight":1,"index":3}]}],"outputDim":8}],"postLayers":[{"neurons":[{"weights":[{"weight":1.2999999523162842,"index":3},{"weight":0.8999999761581421,"index":4},{"weight":1.149999976158142,"index":5},{"weight":0.8999999761581421,"index":6},{"weight":1,"index":7}],"bias":0,"name":"post_layer_output_0","activation":"linear"}],"outputDim":1}],"outputs":{"neurons":[{"name":"output_0","activation":"linear","weights":[{"weight":1,"index":0}],"bias":0}]}}'
  );
  const graph = RNNGraph.deserialize(serializedRNNGraph);
  graph.setInputSequence([new Float32Array(graph.inputDim).fill(-1)]);
</script>

<NodeVizComp {graph} />
